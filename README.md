# ğŸ“œ å¤æ–‡æ™ºèƒ½é—®ç­”ç³»ç»Ÿ

åŸºäºRAGæŠ€æœ¯çš„å¤å…¸æ–‡çŒ®æ™ºèƒ½é—®ç­”ç³»ç»Ÿï¼Œæ”¯æŒè®ºè¯­ã€å­Ÿå­ã€å²è®°ç­‰å„ç§å¤æ–‡çš„è¯­ä¹‰æ£€ç´¢å’Œæ™ºèƒ½é—®ç­”ã€‚

## âœ¨ ä¸»è¦åŠŸèƒ½

- **æ™ºèƒ½æ£€ç´¢**: BM25å…³é”®è¯ + å‘é‡è¯­ä¹‰æ··åˆæ£€ç´¢
- **AIé—®ç­”**: æ”¯æŒDeepSeekã€æ™ºè°±GLMç­‰APIè¿›è¡Œæ™ºèƒ½å›ç­”
- **å¤šç§ç•Œé¢**: Streamlit Webç•Œé¢ + åç«¯API + å‰ç«¯é¡µé¢
- **æ•°æ®å¤„ç†**: è‡ªåŠ¨åˆ†å—ã€è¯é¢˜åˆ†ç±»ã€ä¸Šä¸‹æ–‡æå–



## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ ğŸ“ streamlit/             # Streamlitç‰ˆæœ¬
â”‚   â”œâ”€â”€ ğŸ“„ app.py             # ä¸»åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ ğŸ“„ config.py          # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ ğŸ“„ models.py          # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ ğŸ“„ rag_system.py      # RAGæ ¸å¿ƒç³»ç»Ÿ
â”‚   â”œâ”€â”€ ğŸ“„ retrieval.py       # æ£€ç´¢å™¨å®ç°
â”‚   â”œâ”€â”€ ğŸ“„ text_processing.py # æ–‡æœ¬å¤„ç†
â”‚   â”œâ”€â”€ ğŸ“„ api_client.py      # APIå®¢æˆ·ç«¯
â”‚   â””â”€â”€ ğŸ“„ rag_client.py      # RAGå®¢æˆ·ç«¯åº“
â”œâ”€â”€ ğŸ“ backend/               # åç«¯APIç‰ˆæœ¬
â”œâ”€â”€ ğŸ“„ index.html            # å‰ç«¯ç•Œé¢
```



## ğŸš€ ç¯å¢ƒé…ç½®

### å®‰è£…ä¾èµ–

```bash
# åŸºç¡€ä¾èµ–
pip install torch==2.7.0
pip install sentence-transformers
pip install streamlit chromadb pandas numpy jieba

# å¯é€‰ä¾èµ–ï¼ˆæ¨èå®‰è£…ï¼‰
pip install rank-bm25                    # BM25æ£€ç´¢
pip install sentence-transformers torch  # å‘é‡è®¡ç®—å’Œé‡æ’åº
pip install zhipuai                      # æ™ºè°±GLM API
```

### æ•°æ®å‡†å¤‡

æŒ‰ä»¥ä¸‹ç»“æ„ç»„ç»‡å¤æ–‡æ•°æ®ï¼š

```
data/
â”œâ”€â”€ è®ºè¯­/
â”‚   â”œâ”€â”€ å­¦è€Œ/
â”‚   â”‚   â””â”€â”€ text.txt
â”‚   â””â”€â”€ ä¸ºæ”¿/
â”‚       â””â”€â”€ text.txt
â”œâ”€â”€ å­Ÿå­/
â”‚   â””â”€â”€ æ¢æƒ ç‹ä¸Š/
â”‚       â””â”€â”€ text.txt
â””â”€â”€ å²è®°/
    â””â”€â”€ é¡¹ç¾½æœ¬çºª/
        â””â”€â”€ text.txt
```

æ–‡æœ¬æ–‡ä»¶å†…å®¹ç¤ºä¾‹ï¼š

```
å­¦è€Œæ—¶ä¹ ä¹‹ï¼Œä¸äº¦è¯´ä¹ï¼Ÿ
æœ‰æœ‹è‡ªè¿œæ–¹æ¥ï¼Œä¸äº¦ä¹ä¹ï¼Ÿ
äººä¸çŸ¥è€Œä¸æ„ ï¼Œä¸äº¦å›å­ä¹ï¼Ÿ
```

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### 1. Streamlit Webç•Œé¢

```bash
cd streamlit
streamlit run app.py
```

è®¿é—® http://localhost:8501

**ä½¿ç”¨æ­¥éª¤**ï¼š

1. åœ¨ä¾§è¾¹æ é…ç½®æ•°æ®ç›®å½•è·¯å¾„
2. é…ç½®AI APIå¯†é’¥ï¼ˆå¯é€‰ï¼‰
3. ç‚¹å‡»"åŠ è½½å¤æ–‡æ•°æ®"
4. åœ¨ä¸»ç•Œé¢è¾“å…¥é—®é¢˜è¿›è¡Œæ£€ç´¢

### 2. åç«¯API

```bash
cd backend
python api_server.py  # å¯åŠ¨APIæœåŠ¡
```

### 3. å‰ç«¯é¡µé¢

ç›´æ¥æ‰“å¼€ `index.html` æ–‡ä»¶

## ğŸ”§ é…ç½®è¯´æ˜

### APIé…ç½®

åœ¨Streamlitä¾§è¾¹æ é…ç½®ï¼š

**DeepSeek API**:

```
API Provider: DeepSeek
API Key: your-deepseek-api-key
```

**æ™ºè°±GLM API**:

```
API Provider: GLM
API Key: your-glm-api-key
```

![](assets/rag_configuration_AI.png)



### æ£€ç´¢å‚æ•°

- **æ£€ç´¢æ¨¡å¼**: æ··åˆæ£€ç´¢ï¼ˆæ¨èï¼‰/ å‘é‡æ£€ç´¢ / å…³é”®è¯æ£€ç´¢
- **è¿”å›æ•°é‡**: 1-20ä¸ªç»“æœ
- **é‡æ’åº**: å¯é€‰å¯ç”¨BGEé‡æ’åºæ¨¡å‹

![](assets/rag_configuration_retrieve.png)


## ğŸ’¡ ä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€æŸ¥è¯¢

```
é—®é¢˜: "ä»€ä¹ˆæ˜¯ä»ï¼Ÿ"
ç³»ç»Ÿä¼šè‡ªåŠ¨æœç´¢ç›¸å…³å¤æ–‡å¹¶ç”Ÿæˆæ™ºèƒ½å›ç­”
```

### æŒ‡å®šèŒƒå›´æŸ¥è¯¢

```
æŒ‡å®šä¹¦å: "è®ºè¯­"
æŒ‡å®šç¯‡ç« : "å­¦è€Œ"
é—®é¢˜: "å­¦ä¹ çš„æ–¹æ³•"
```

### æ™ºèƒ½æ£€ç´¢
- é…ç½®å¤§æ¨¡å‹API
- å‹¾é€‰ æ™ºèƒ½æŸ¥è¯¢ä¼˜åŒ–
  
![](assets/rag_example1.png)


### å¤šè½®æ£€ç´¢
- é…ç½®å¤§æ¨¡å‹API
- å‹¾é€‰ å¯ç”¨å¤šè½®æ£€ç´¢

![](assets/rag_example2.png)



### åç«¯APIè°ƒç”¨ç¤ºä¾‹

```python
from rag_client import RAGClient

# åˆ›å»ºå®¢æˆ·ç«¯
client = RAGClient("http://localhost:8000")

# æ™ºèƒ½æœç´¢
response = client.smart_search("å¦‚ä½•ä¿®èº«å…»æ€§", top_k=5)
print(response.results[0].content)

# ç›´æ¥æœç´¢
response = client.direct_search(
    "ä»€ä¹ˆæ˜¯ä»", 
    bm25_weight=0.3, 
    vector_weight=0.7
)
```



## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡è¿è¡Œ**éœ€è¦ä¸‹è½½embeddingæ¨¡å‹ï¼Œå¯èƒ½éœ€è¦ä¸€äº›æ—¶é—´
2. **GPUæ¨è**ä½†éå¿…éœ€ï¼ŒCPUä¹Ÿå¯ä»¥è¿è¡Œ
3. **APIå¯†é’¥**æ˜¯å¯é€‰çš„ï¼Œä¸é…ç½®ä¹Ÿå¯ä»¥è¿›è¡ŒåŸºç¡€æ£€ç´¢
4. **æ•°æ®é‡**è¾ƒå¤§æ—¶å»ºè®®ä½¿ç”¨8GBä»¥ä¸Šå†…å­˜
